<h3>文件系统标志</h3>

只要该`flag`选项采用字符串，就可以使用以下标志：

* `'a'` - 打开文件进行追加。如果文件不存在，则创建该文件。

* `'ax'`- `'a'`如果路径存在，但是会失败。

* `'a+'` - 打开文件进行阅读和追加。如果文件不存在，则创建该文件。

* `'ax+'`- `'a+'`如果路径存在，但是会失败。

* `'as'` - 打开文件以在同步模式下追加。如果文件不存在，则创建该文件。

* `'as+'` - 打开文件以便以同步模式读取和追加。如果文件不存在，则创建该文件。

* `'r'` - 打开文件进行阅读。如果文件不存在，则会发生异常。

* `'r+'` - 打开文件进行读写。如果文件不存在，则会发生异常。

* `'rs+'` - 以同步模式打开文件进行读写。指示操作系统绕过本地文件系统缓存。

这对于在NFS挂载上打开文件非常有用，因为它允许跳过可能过时的本地缓存。它对I / O性能有非常实际的影响，因此除非需要，否则不建议使用此标志。

这不会转为`fs.open()`或`fsPromises.open()`进入同步阻塞调用。如果需要同步操作，`fs.openSync()`应该使用类似的操作 。

* `'w'` - 打开文件进行写作。创建文件（如果它不存在）或截断（如果存在）。

* `'wx'`- `'w'`如果路径存在，但是会失败。

* `'w+'` - 打开文件进行读写。创建文件（如果它不存在）或截断（如果存在）。

* `'wx+'`- `'w+'`如果路径存在，但是会失败。

`flag`也可以是记录的数字; 常用常量可从`fs.constants`。在Windows上，标志翻译成他们等同的适用，例如`O_WRONLY`到`FILE_GENERIC_WRITE`，或`O_EXCL|O_CREAT`到`CREATE_NEW`，通过所接受`CreateFileW`。

独占标志`'x'`（`O_EXCL`flag in open(2)）确保新创建路径。在POSIX系统上，即使路径是不存在的文件的符号链接，也认为路径存在。独占标志可能适用于网络文件系统，也可能不适用。

在Linux上，在附加模式下打开文件时，位置写入不起作用。内核忽略position参数，并始终将数据附加到文件末尾。

修改文件而不是替换文件可能需要标记模式`'r+' `而不是默认模式`'w'`。

某些标志的行为是特定于平台的。因此，在带有`'a+'`标志的macOS和Linux上打开目录- 参见下面的示例 - 将返回错误。相反，在Windows和FreeBSD上，`FileHandle` 将返回文件描述符或。

	// macOS and Linux
	fs.open('<directory>', 'a+', (err, fd) => {
	  // => [Error: EISDIR: illegal operation on a directory, open <directory>]
	});
	
	// Windows and FreeBSD
	fs.open('<directory>', 'a+', (err, fd) => {
	  // => null, <fd>
	});
在Windows上，使用`'w'`标志（通过`fs.open()`或`fs.writeFile()`或`fsPromises.open()`）打开现有的隐藏文件将失败 `EPERM`。可以打开现有的隐藏文件以便使用该`'r+'`标志进行写入。

调用`fs.ftruncate()`或`filehandle.truncate()`可用于重置文件内容。